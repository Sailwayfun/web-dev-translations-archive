---
import BaseLayout from '../layouts/BaseLayout.astro'
import { getCollection } from 'astro:content'

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
)
const latest = posts[0]
---

<BaseLayout
  title="Sail Web Dev Archive"
  description="A minimal archive for translated web development writing."
>
  <section>
    <p class="prose" style="margin-top: 0;">
      A single place to keep translated essays in a calm, readable frame.
    </p>

    {
      latest ? (
        <article class="prose" style="margin-top: 2.5rem;">
          <h2 style="margin-top: 0;">{latest.data.title}</h2>
          <p>{latest.data.description}</p>
          <div class="meta">
            <span>{latest.data.date.toLocaleDateString('zh-TW')}</span>
            {latest.data.tags ? (
              <span class="tags">
                {latest.data.tags.map((tag) => (
                  <span class="tag">{tag}</span>
                ))}
              </span>
            ) : null}
          </div>
          <a href={`/blog/${latest.slug}`}>Read the full article â†’</a>
        </article>
      ) : (
        <p class="prose">No posts yet.</p>
      )
    }
  </section>
</BaseLayout>
